[{"path":"/2025/02/13/redisä¸æ•°æ®åº“çš„åŒå†™ä¸€è‡´æ€§æ–¹æ¡ˆ/","content":"Redisä¸æ•°æ®åº“çš„åŒå†™ä¸€è‡´æ€§æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¸¸è§çš„æŒ‘æˆ˜ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯åœ¨ç¼“å­˜ï¼ˆRedisï¼‰å’Œæ•°æ®åº“ä¹‹é—´ç»´æŒæ•°æ®çš„ä¸€è‡´æ€§ã€‚ä»¥ä¸‹æ˜¯å¸¸è§çš„è§£å†³æ–¹æ¡ˆåŠå…¶å®ç°é€»è¾‘ï¼š 1. ç¼“å­˜æ›´æ–°ç­–ç•¥1.1 Cache-Asideï¼ˆæ—è·¯ç¼“å­˜ï¼‰ æ ¸å¿ƒé€»è¾‘ï¼šç”±åº”ç”¨å±‚ç®¡ç†ç¼“å­˜å’Œæ•°æ®åº“çš„è¯»å†™ã€‚ è¯»æ“ä½œï¼š å…ˆè¯»ç¼“å­˜ï¼Œå‘½ä¸­åˆ™è¿”å›ï¼› æœªå‘½ä¸­åˆ™è¯»æ•°æ®åº“ï¼Œå›å¡«ç¼“å­˜ã€‚ å†™æ“ä½œï¼š å…ˆæ›´æ–°æ•°æ®åº“ï¼› å†åˆ é™¤ç¼“å­˜ï¼ˆè€Œéæ›´æ–°ï¼Œé¿å…å¹¶å‘å†™å¯¼è‡´è„æ•°æ®ï¼‰ã€‚ ä¼˜ç‚¹ï¼šç®€å•ã€é€šç”¨ï¼Œé€‚ç”¨äºè¯»å¤šå†™å°‘åœºæ™¯ã€‚ ç¼ºç‚¹ï¼š çŸ­æš‚ä¸ä¸€è‡´ï¼šè‹¥æ•°æ®åº“æ›´æ–°åã€ç¼“å­˜åˆ é™¤å‰æœ‰è¯»è¯·æ±‚ï¼Œä¼šè¯»åˆ°æ—§æ•°æ®ã€‚ éœ€å¤„ç†ç¼“å­˜åˆ é™¤å¤±è´¥ï¼ˆéœ€é‡è¯•æˆ–å¼‚æ­¥è¡¥å¿ï¼‰ã€‚ 1.2 Write-Throughï¼ˆç›´å†™ï¼‰ æ ¸å¿ƒé€»è¾‘ï¼šæ‰€æœ‰å†™æ“ä½œåŒæ—¶æ›´æ–°æ•°æ®åº“å’Œç¼“å­˜ã€‚ å†™æ“ä½œï¼š å…ˆæ›´æ–°ç¼“å­˜ï¼› åŒæ­¥æ›´æ–°æ•°æ®åº“ã€‚ ä¼˜ç‚¹ï¼šå¼ºä¸€è‡´æ€§ã€‚ ç¼ºç‚¹ï¼š å†™å…¥æ€§èƒ½ä½ï¼ˆéœ€åŒæ—¶å†™ç¼“å­˜å’Œæ•°æ®åº“ï¼‰ï¼› ä¸é€‚ç”¨äºå†™å¤šåœºæ™¯ã€‚ 2. åŒåˆ ç­–ç•¥å»¶è¿ŸåŒåˆ  æ ¸å¿ƒé€»è¾‘ï¼š å…ˆåˆ é™¤ç¼“å­˜ï¼› æ›´æ–°æ•°æ®åº“ï¼› å»¶è¿Ÿä¸€æ®µæ—¶é—´åå†æ¬¡åˆ é™¤ç¼“å­˜ï¼ˆç¡®ä¿ä¸»ä»åŒæ­¥å®Œæˆåçš„æ—§æ•°æ®æ¸…ç†ï¼‰ã€‚ é€‚ç”¨åœºæ™¯ï¼šæ•°æ®åº“ä¸»ä»æ¶æ„ï¼Œå­˜åœ¨åŒæ­¥å»¶è¿Ÿã€‚ å…³é”®å‚æ•°ï¼šå»¶è¿Ÿæ—¶é—´éœ€å¤§äºä¸»ä»åŒæ­¥æ—¶é—´ï¼ˆå¦‚500msï¼‰ã€‚ ç¼ºç‚¹ï¼šä¾èµ–å»¶è¿Ÿæ—¶é—´çš„å‡†ç¡®æ€§ã€‚ 3. å¼‚æ­¥è¡¥å¿3.1 åŸºäºæ¶ˆæ¯é˜Ÿåˆ— æ ¸å¿ƒé€»è¾‘ï¼š æ›´æ–°æ•°æ®åº“ï¼› å‘é€æ¶ˆæ¯åˆ°MQï¼Œå¼‚æ­¥åˆ é™¤ç¼“å­˜ï¼› æ¶ˆè´¹ç«¯é‡è¯•å¤±è´¥ä»»åŠ¡ã€‚ ä¼˜ç‚¹ï¼šè§£è€¦ã€ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚ ç¼ºç‚¹ï¼šç³»ç»Ÿå¤æ‚åº¦å¢åŠ ï¼Œéœ€ç»´æŠ¤MQã€‚ 3.2 åŸºäºæ•°æ®åº“Binlogï¼ˆå¦‚Canalï¼‰ æ ¸å¿ƒé€»è¾‘ï¼š æ•°æ®åº“æ›´æ–°åï¼Œé€šè¿‡Binlogï¼ˆå¦‚MySQLï¼‰æ•è·å˜æ›´ï¼› é€šè¿‡ä¸­é—´ä»¶ï¼ˆå¦‚Canalï¼‰è§£æBinlogï¼› å¼‚æ­¥æ›´æ–°æˆ–åˆ é™¤ç¼“å­˜ã€‚ ä¼˜ç‚¹ï¼šæ— ä¾µå…¥æ€§ï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚ ç¼ºç‚¹ï¼šä¾èµ–æ•°æ®åº“æ—¥å¿—åŒæ­¥æœºåˆ¶ï¼Œå»¶è¿Ÿå¯èƒ½è¾ƒé«˜ã€‚ 4. å¼ºä¸€è‡´æ€§æ–¹æ¡ˆ4.1 åˆ†å¸ƒå¼é” æ ¸å¿ƒé€»è¾‘ï¼š å†™æ“ä½œå‰è·å–åˆ†å¸ƒå¼é”ï¼› æ›´æ–°æ•°æ®åº“ååˆ é™¤ç¼“å­˜ï¼› è¯»æ“ä½œè‹¥ç¼“å­˜æœªå‘½ä¸­ï¼Œéœ€å…ˆè·å–é”å†æŸ¥æ•°æ®åº“ã€‚ ä¼˜ç‚¹ï¼šå¼ºä¸€è‡´æ€§ã€‚ ç¼ºç‚¹ï¼šæ€§èƒ½ä½ï¼Œå¤æ‚åº¦é«˜ã€‚ 4.2 ç‰ˆæœ¬å·&#x2F;æ—¶é—´æˆ³ æ ¸å¿ƒé€»è¾‘ï¼š æ•°æ®å†™å…¥æ—¶é™„å¸¦ç‰ˆæœ¬å·ï¼› æ›´æ–°æ—¶æ ¡éªŒç‰ˆæœ¬å·ï¼Œé˜²æ­¢æ—§æ•°æ®è¦†ç›–ï¼› ç¼“å­˜ä¸­å­˜å‚¨ç‰ˆæœ¬å·ï¼Œè¯»è¯·æ±‚éœ€æ ¡éªŒã€‚ é€‚ç”¨åœºæ™¯ï¼šå¯¹ä¸€è‡´æ€§è¦æ±‚æé«˜çš„åœºæ™¯ï¼ˆå¦‚åº“å­˜æ‰£å‡ï¼‰ã€‚ ç¼ºç‚¹ï¼šå®ç°å¤æ‚ï¼Œéœ€ç»´æŠ¤ç‰ˆæœ¬å·ã€‚ 5. æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰æ‹© æ–¹æ¡ˆ ä¸€è‡´æ€§çº§åˆ« æ€§èƒ½ å¤æ‚åº¦ é€‚ç”¨åœºæ™¯ Cache-Aside æœ€ç»ˆä¸€è‡´ é«˜ ä½ è¯»å¤šå†™å°‘ å»¶è¿ŸåŒåˆ  æœ€ç»ˆä¸€è‡´ ä¸­ ä¸­ ä¸»ä»åŒæ­¥å»¶è¿Ÿåœºæ™¯ å¼‚æ­¥è¡¥å¿ï¼ˆMQ&#x2F;Binlogï¼‰ æœ€ç»ˆä¸€è‡´ ä¸­ é«˜ é«˜å¹¶å‘ã€æœ€ç»ˆä¸€è‡´åœºæ™¯ åˆ†å¸ƒå¼é” å¼ºä¸€è‡´ ä½ é«˜ å¯¹ä¸€è‡´æ€§è¦æ±‚æé«˜çš„åœºæ™¯ 6. æœ€ä½³å®è·µ ä¼˜å…ˆæœ€ç»ˆä¸€è‡´æ€§ï¼šå¤§å¤šæ•°åœºæ™¯ä¸éœ€è¦å¼ºä¸€è‡´ï¼Œå¯é€šè¿‡å¼‚æ­¥è¡¥å¿æˆ–å»¶è¿ŸåŒåˆ å®ç°ã€‚ ç›‘æ§ä¸å‘Šè­¦ï¼šç›‘æ§ç¼“å­˜ä¸æ•°æ®åº“ä¸ä¸€è‡´çš„æ—¶é•¿ï¼Œè®¾ç½®é˜ˆå€¼å‘Šè­¦ã€‚ å…œåº•ç­–ç•¥ï¼š ç¼“å­˜è®¾ç½®åˆç†çš„TTLï¼Œé¿å…é•¿æœŸä¸ä¸€è‡´ï¼› å…³é”®æ•°æ®ï¼ˆå¦‚åº“å­˜ï¼‰é‡‡ç”¨å¼ºä¸€è‡´æ€§æ–¹æ¡ˆã€‚ æ€»ç»“é€‰æ‹©æ–¹æ¡ˆéœ€æƒè¡¡ä¸šåŠ¡åœºæ™¯ï¼ˆä¸€è‡´æ€§è¦æ±‚ã€è¯»å†™æ¯”ä¾‹ï¼‰ã€ç³»ç»Ÿå¤æ‚åº¦åŠæ€§èƒ½ã€‚ä¾‹å¦‚ï¼š ç”µå•†å•†å“è¯¦æƒ…é¡µï¼šCache-Aside + å¼‚æ­¥è¡¥å¿ï¼› é‡‘èäº¤æ˜“ç³»ç»Ÿï¼šåˆ†å¸ƒå¼é” + ç‰ˆæœ¬å·ã€‚"},{"path":"/2025/02/12/goå®¹æ˜“è¸©çš„å‘/","content":"goè¯­è¨€å®¹æ˜“è¸©çš„å‘åˆ‡ç‰‡range å–åœ°å€1234567891011func main() &#123;\tarr := []int&#123;1, 2, 3&#125;\tmyMap := make(map[int]*int)\tfor i, v := range arr &#123; myMap[i] = &amp;v\t&#125;\tfor _, v := range myMap &#123; fmt.Println(*v)\t&#125;&#125;//è¾“å‡º 3 3 3 1234567891011//æ­£ç¡®å†™æ³•func main() &#123; arr := []int&#123;1, 2, 3&#125; myMap := make(map[int]*int) for i, v := range arr &#123; myMap[i] = &amp;arr[i] &#125; for _, v := range myMap &#123; fmt.Println(*v) &#125;&#125; æ­»å¾ªç¯ï¼Ÿ12345678910func main() &#123;\tarr := []int&#123;1, 2, 3&#125;\tfor _, v := range arr &#123; arr = append(arr, v)\t&#125;\tfmt.Println(arr)&#125;//è¾“å‡º [1 2 3 1 2 3]//range çš„arræ˜¯ä¸€ä¸ªcopy åˆ‡ç‰‡ä¼ å‚1234567891011func test(arr []int) &#123;\tarr[0] = 4\tarr = append(arr, 1)&#125;func main() &#123;\tarr := []int&#123;1, 2, 3&#125;\ttest(arr)\tfmt.Println(arr)&#125;//è¾“å‡º 4 2 3 12345678910111213141516171819//åˆ‡ç‰‡åº•å±‚ç»“æ„type SliceHeader struct&#123; Data uintptr Len int Cap int&#125;//æ­£ç¡®å†™æ³•func test(arr []int) []int &#123;\tarr[0] = 4\tarr = append(arr, 1)\treturn arr&#125;func main() &#123;\tarr := []int&#123;1, 2, 3&#125;\tarr = test(arr)\tfmt.Println(arr)&#125; åˆ‡ç‰‡copy12345678910111213141516171819202122232425262728func main() &#123; a := []int&#123;1, 2, 3, 4, 5&#125; b := a b[0] = 9 fmt.Println(a)&#125;func main() &#123; a := []int&#123;1, 2, 3, 4, 5&#125; b := make([]int, 3) b = a[:3] b[0] = 9 b = append(b, 10) fmt.Println(a)&#125;//è¾“å‡º// [9 2 3 4 5]//\t[9 2 3 10 5]func main() &#123;\ta := []int&#123;1, 2, 3, 4, 5&#125;\tb := make([]int, len(a))\tcopy(b, a)\tb[0] = 10\tfmt.Println(a)&#125; json.Unmarshalnull1234567891011func main() &#123;\ts := &quot;null&quot;\tm := make(map[string]interface&#123;&#125;)\tif err := json.Unmarshal([]byte(s), &amp;m); err != nil &#123; fmt.Println(err.Error())\t&#125;\tm[&quot;test&quot;] = 1\tfmt.Println(m)&#125;//panic: assignment to entry in nil map 12345678910111213//æ­£ç¡®å†™æ³•func main() &#123; s := &quot;null&quot; m := make(map[string]interface&#123;&#125;) if err := json.Unmarshal([]byte(s), &amp;m); err != nil &#123; fmt.Println(err.Error()) &#125; if m==nil&#123; return &#125; m[&quot;test&quot;] = 1 fmt.Println(m)&#125; interface{}æ¥æ”¶æ•°æ®12345678910111213141516171819func main() &#123;\tstr := `&#123;&quot;name&quot;: &quot;å¼ ä¸‰&quot;, &quot;age&quot;: 20&#125;`\tvar mp map[string]interface&#123;&#125;\terr := json.Unmarshal([]byte(str), &amp;mp)\tif err != nil &#123; return\t&#125;\tvar age int\tage = mp[&quot;age&quot;].(int)\tfmt.Println(age)&#125;//ä½¿ç”¨ Golang è§£æ json æ ¼å¼æ•°æ®æ—¶ï¼Œè‹¥ä»¥ interface&#123;&#125; æ¥æ”¶æ•°æ®ï¼Œåˆ™ä¼šæŒ‰ç…§ä¸‹åˆ—è§„åˆ™è¿›è¡Œè§£æï¼šbool for JSON booleansfloat64 for JSON numbersstring for JSON strings[]interface&#123;&#125; for JSON arraysmap[string]interface&#123;&#125; for JSON objectsnil for JSON null deferdeferå’Œreturnçš„æ‰§è¡Œé¡ºåº123456789101112131415161718192021222324252627282930313233343536func test() (b int) &#123; defer func() &#123; b += 10 &#125;() return b&#125;func test1() (b int) &#123;\tb = 10\tdefer func() &#123; b += 10\t&#125;()\treturn&#125;func test2() int &#123;\tb := 10\tdefer func() &#123; b += 10\t&#125;()\treturn b&#125;func test3() *int &#123;\tb := 10\tdefer func() &#123; b += 10\t&#125;()\treturn &amp;b&#125;func main() &#123;\tfmt.Println(test1())\tfmt.Println(test2())\tfmt.Println(*test3())&#125;//è¾“å‡º 20 10 20 é—­åŒ…é—­åŒ…æ˜¯é€šè¿‡æŒ‡é’ˆæ“ä½œæ¯å‡½æ•°ä¸­çš„å˜é‡1234567891011121314151617181920212223242526272829303132333435363738394041424344func myPrint(x int) &#123;\tfmt.Println(&quot;defer&quot;, x)&#125;func test1() (x int) &#123;\tdefer myPrint(x)\tx = 10\treturn&#125;func test2() (x int) &#123;\tdefer func() &#123; myPrint(x)\t&#125;()\tx = 10\treturn&#125;func test3() (x int) &#123;\tdefer func(a int) &#123; myPrint(a)\t&#125;(x)\tx = 10\treturn&#125;func main() &#123;\tvar res int\tfmt.Println(&quot;test1 &quot;)\tres = test1()\tfmt.Println(&quot;main&quot;, res)\tfmt.Println(&quot;test2&quot;)\tres = test2()\tfmt.Println(&quot;main&quot;, res)\tfmt.Println(&quot;test3&quot;)\tres = test3()\tfmt.Println(&quot;main&quot;, res)&#125;//è¾“å‡ºtest1 defer 0main 10test2defer 10main 10test3defer 0main 10 æ³¨æ„å˜é‡çš„ä½œç”¨åŸŸ1234567891011121314151617181920212223func Foo() (err error) &#123; if err := Bar(); err != nil &#123; return &#125; return&#125;//æ­£ç¡®å†™æ³•func Foo() (err error) &#123; if err := Bar(); err != nil &#123; return err &#125; return&#125;//æˆ–func Foo() (err error) &#123; if er := Bar(); er != nil &#123; err = er return &#125; return&#125; mapåˆå§‹åŒ–çš„æ—¶å€™å°½é‡æŒ‡å®šmapå®¹é‡1m := make(map[int],100) range ä¾¿åˆ©mapæ—¶ï¼Œæ³¨æ„mapçš„æ— åºæ€§1234567891011121314151617181920212223242526func main() &#123;\tmax := 10\tmp := make(map[int]int, max)\tfor i := 0; i &lt; max; i++ &#123; mp[i] = i + 1\t&#125;\tfor k, v := range mp &#123; fmt.Println(k, v)\t&#125;&#125;func main() &#123;\tmax := 10\tmp := make(map[int]int, max)\tarr := make([]int, 0, max)\tfor i := 0; i &lt; max; i++ &#123; mp[i] = i + 1 arr = append(arr, i)\t&#125;\tfor _, v := range arr &#123; fmt.Println(v, mp[v])\t&#125;&#125; nil mapå†™å…¥ä¼španic12345678910111213func main() &#123;\tvar mp map[int]struct&#123;&#125;\tmp[1] = struct&#123;&#125;&#123;&#125;\tfmt.Println(mp)&#125;//panic: assignment to entry in nil mapfunc main() &#123;\tmp := make(map[int]struct&#123;&#125;)\tmp[1] = struct&#123;&#125;&#123;&#125;\tfmt.Println(mp)&#125; mapä¸æ˜¯å¹¶å‘å®‰å…¨çš„12345678910111213141516171819202122232425262728293031323334353637383940func main() &#123;\tmax := 100\tmp := make(map[int]int, max)\twg := sync.WaitGroup&#123;&#125;\twg.Add(max)\tfor i := 0; i &lt; max; i++ &#123; tmp := i go func() &#123; defer func() &#123; wg.Done() &#125;() mp[tmp] = tmp &#125;()\t&#125;\twg.Wait()\tfmt.Println(mp)&#125;//fatal error: concurrent map writesfunc main() &#123;\tmax := 100\tvar mp sync.Map\twg := sync.WaitGroup&#123;&#125;\twg.Add(max)\tfor i := 0; i &lt; max; i++ &#123; tmp := i go func() &#123; defer func() &#123; wg.Done() &#125;() mp.Store(tmp, tmp) &#125;()\t&#125;\twg.Wait()\tmp.Range(func(k, v interface&#123;&#125;) bool &#123; fmt.Println(k, v) return true\t&#125;)&#125;"},{"path":"/2025/02/11/playwright/","content":"Playwright å®‰è£…1Looks like Playwright was just installed or updated. â•‘ â•‘ Please run the following command to download new browsers: â•‘ â•‘ â•‘ â•‘ playwright install â•‘ â•‘ â•‘ â•‘ &lt;3 Playwright Team çœ‹åˆ°è¿™ä¸ªæç¤ºï¼Œè¯´æ˜ä½ åˆšåˆšå®‰è£…æˆ–æ›´æ–°äº† Playwrightï¼Œä½†è¿˜éœ€è¦ä¸‹è½½ Playwright æ‰€éœ€çš„æµè§ˆå™¨ï¼ˆå¦‚ Chromiumã€Firefoxã€WebKit ç­‰ï¼‰ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æ“ä½œæ­¥éª¤ï¼š 1 ç›´æ¥è¿è¡Œå®‰è£…å‘½ä»¤åœ¨ç»ˆç«¯ï¼ˆå‘½ä»¤è¡Œï¼‰ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè‡ªåŠ¨ä¸‹è½½æµè§ˆå™¨ï¼š 1playwright install è¿™ä¼šè‡ªåŠ¨ä¸‹è½½ Playwright æ”¯æŒçš„æµè§ˆå™¨ï¼ˆé»˜è®¤åŒ…æ‹¬ Chromiumã€Firefox å’Œ WebKitï¼‰ã€‚ 2 å¯é€‰ï¼šæŒ‡å®šæµè§ˆå™¨å®‰è£…å¦‚æœåªéœ€è¦å®‰è£…ç‰¹å®šæµè§ˆå™¨ï¼Œå¯ä»¥æŒ‡å®šæµè§ˆå™¨åç§°ï¼š 123playwright install chromium # ä»…å®‰è£… Chromiumplaywright install firefox # ä»…å®‰è£… Firefoxplaywright install webkit # ä»…å®‰è£… WebKit 3 éªŒè¯æ˜¯å¦æˆåŠŸå®‰è£…å®Œæˆåï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æµ‹è¯• Playwright æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š 1playwright test å¦‚æœçœ‹åˆ°æµè§ˆå™¨è‡ªåŠ¨å¯åŠ¨å¹¶è¿è¡Œæµ‹è¯•ï¼Œè¯´æ˜ä¸€åˆ‡å°±ç»ªã€‚ 4 å¸¸è§é—®é¢˜è§£å†³ æƒé™é—®é¢˜ï¼ˆLinux&#x2F;macOSï¼‰ï¼š å¦‚æœæç¤ºæƒé™ä¸è¶³ï¼Œå°è¯•åœ¨å‘½ä»¤å‰åŠ  sudoï¼š 1sudo playwright install ç½‘ç»œé—®é¢˜ï¼š å¦‚æœä¸‹è½½é€Ÿåº¦æ…¢æˆ–å¤±è´¥ï¼ˆå°¤å…¶åœ¨å›½å†…ï¼‰ï¼Œå¯ä»¥å°è¯•ï¼š ä½¿ç”¨å›½å†…é•œåƒæºï¼ˆéœ€é…ç½®ç¯å¢ƒå˜é‡ï¼‰ï¼š 1PLAYWRIGHT_DOWNLOAD_HOST=https://npmmirror.com/mirrors/playwright playwright install é€šè¿‡ npm é…ç½®é•œåƒï¼ˆå¦‚æœé€šè¿‡ npm å®‰è£… Playwrightï¼‰å¦‚æœä½ é€šè¿‡ npm å®‰è£… Playwrightï¼Œå¯ä»¥é…ç½® npm é•œåƒæºï¼š 1234# è®¾ç½® npm é•œåƒnpm config set registry https://registry.npmmirror.com# å®‰è£… Playwright å¹¶è‡ªåŠ¨ä½¿ç”¨é•œåƒnpm install playwright æ‰¾ä¸åˆ°å‘½ä»¤ï¼š å¦‚æœæç¤º playwright: command not foundï¼Œå¯èƒ½æ˜¯å®‰è£…è·¯å¾„æœªæ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ã€‚å°è¯•ï¼š 1python -m playwright install # é€šè¿‡ Python æ¨¡å—ç›´æ¥è°ƒç”¨ ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸€æ­¥ï¼ŸPlaywright æ˜¯ä¸€ä¸ªæµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·ï¼Œå®ƒä¾èµ–çœŸå®çš„æµè§ˆå™¨å¼•æ“æ¥è¿è¡Œæµ‹è¯•ã€‚é¦–æ¬¡å®‰è£…æ—¶ï¼Œéœ€è¦å•ç‹¬ä¸‹è½½è¿™äº›æµè§ˆå™¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå› æ­¤å®˜æ–¹æç¤ºä½ æ‰§è¡Œ playwright installã€‚ å®Œæˆåï¼Œä½ å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨ Playwright è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•äº†ï¼ ğŸš€"},{"path":"/2025/02/09/Goè¯­è¨€åä¸ªæŠ€å·§/","content":"GOè¯­è¨€æœ€æœ‰ä»·å€¼çš„åä¸ªæŠ€å·§GOè¯­è¨€ï¼ˆåˆç§°Golangï¼‰ä»¥å…¶ç®€æ´ã€é«˜æ•ˆå’Œå¹¶å‘æ”¯æŒè€Œé—»åã€‚ä½œä¸ºä¸€åGOå¼€å‘è€…ï¼ŒæŒæ¡ä¸€äº›å®ç”¨çš„æŠ€å·§å¯ä»¥æ˜¾è‘—æå‡ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚æœ¬æ–‡å°†åˆ†äº«åä¸ªGOè¯­è¨€ä¸­æœ€æœ‰ä»·å€¼çš„æŠ€å·§ï¼Œå¹¶é€šè¿‡ä»£ç ç¤ºä¾‹å¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ã€‚ 1. ä½¿ç”¨deferç®€åŒ–èµ„æºç®¡ç†deferæ˜¯GOè¯­è¨€ä¸­ç”¨äºå»¶è¿Ÿæ‰§è¡Œçš„å…³é”®å­—ï¼Œå¸¸ç”¨äºèµ„æºé‡Šæ”¾ï¼ˆå¦‚å…³é—­æ–‡ä»¶ã€è§£é”äº’æ–¥é”ç­‰ï¼‰ã€‚å®ƒå¯ä»¥ç¡®ä¿èµ„æºåœ¨å‡½æ•°ç»“æŸæ—¶è¢«æ­£ç¡®é‡Šæ”¾ï¼Œé¿å…èµ„æºæ³„æ¼ã€‚ 12345678910111213func readFile(filename string) (string, error) &#123; file, err := os.Open(filename) if err != nil &#123; return &quot;&quot;, err &#125; defer file.Close() // ç¡®ä¿æ–‡ä»¶åœ¨å‡½æ•°ç»“æŸæ—¶å…³é—­ content, err := io.ReadAll(file) if err != nil &#123; return &quot;&quot;, err &#125; return string(content), nil&#125; 2. åˆ©ç”¨goroutineå®ç°å¹¶å‘GOè¯­è¨€çš„goroutineæ˜¯å®ç°å¹¶å‘çš„æ ¸å¿ƒå·¥å…·ã€‚å®ƒæ¯”çº¿ç¨‹æ›´è½»é‡ï¼Œå¯åŠ¨é€Ÿåº¦å¿«ï¼Œé€‚åˆå¤„ç†é«˜å¹¶å‘ä»»åŠ¡ã€‚ 123456789101112func printNumbers() &#123; for i := 1; i &lt;= 5; i++ &#123; fmt.Println(i) time.Sleep(500 * time.Millisecond) &#125;&#125;func main() &#123; go printNumbers() // å¯åŠ¨ä¸€ä¸ªgoroutine go printNumbers() // å¯åŠ¨å¦ä¸€ä¸ªgoroutine time.Sleep(3 * time.Second) // ç­‰å¾…goroutineæ‰§è¡Œå®Œæ¯•&#125; 3. ä½¿ç”¨channelè¿›è¡Œé€šä¿¡channelæ˜¯GOè¯­è¨€ä¸­ç”¨äºgoroutineä¹‹é—´é€šä¿¡çš„å·¥å…·ã€‚å®ƒå¯ä»¥å®‰å…¨åœ°ä¼ é€’æ•°æ®ï¼Œé¿å…ç«æ€æ¡ä»¶ã€‚ 123456789101112131415161718192021222324func worker(id int, jobs &lt;-chan int, results chan&lt;- int) &#123; for job := range jobs &#123; fmt.Printf(&quot;Worker %d processing job %d &quot;, id, job) results &lt;- job * 2 &#125;&#125;func main() &#123; jobs := make(chan int, 10) results := make(chan int, 10) for w := 1; w &lt;= 3; w++ &#123; go worker(w, jobs, results) &#125; for j := 1; j &lt;= 5; j++ &#123; jobs &lt;- j &#125; close(jobs) for a := 1; a &lt;= 5; a++ &#123; fmt.Println(&quot;Result:&quot;, &lt;-results) &#125;&#125; 4. ä½¿ç”¨sync.WaitGroupç­‰å¾…å¤šä¸ªgoroutineå®Œæˆsync.WaitGroupç”¨äºç­‰å¾…ä¸€ç»„goroutineå®Œæˆä»»åŠ¡ï¼Œéå¸¸é€‚åˆéœ€è¦åŒæ­¥çš„åœºæ™¯ã€‚ 12345678910111213141516func worker(id int, wg *sync.WaitGroup) &#123; defer wg.Done() // ä»»åŠ¡å®Œæˆåé€šçŸ¥WaitGroup fmt.Printf(&quot;Worker %d starting &quot;, id) time.Sleep(time.Second) fmt.Printf(&quot;Worker %d done &quot;, id)&#125;func main() &#123; var wg sync.WaitGroup for i := 1; i &lt;= 3; i++ &#123; wg.Add(1) // å¢åŠ WaitGroupçš„è®¡æ•°å™¨ go worker(i, &amp;wg) &#125; wg.Wait() // ç­‰å¾…æ‰€æœ‰goroutineå®Œæˆ fmt.Println(&quot;All workers done&quot;)&#125; 5. ä½¿ç”¨interfaceå®ç°å¤šæ€GOè¯­è¨€é€šè¿‡interfaceå®ç°å¤šæ€ï¼Œå…è®¸ä¸åŒç±»å‹çš„å¯¹è±¡å®ç°ç›¸åŒçš„æ¥å£ã€‚ 1234567891011121314151617181920type Animal interface &#123; Speak() string&#125;type Dog struct&#123;&#125;func (d Dog) Speak() string &#123; return &quot;Woof!&quot;&#125;type Cat struct&#123;&#125;func (c Cat) Speak() string &#123; return &quot;Meow!&quot;&#125;func main() &#123; animals := []Animal&#123;Dog&#123;&#125;, Cat&#123;&#125;&#125; for _, animal := range animals &#123; fmt.Println(animal.Speak()) &#125;&#125; 6. ä½¿ç”¨contextç®¡ç†goroutineç”Ÿå‘½å‘¨æœŸcontextç”¨äºæ§åˆ¶goroutineçš„ç”Ÿå‘½å‘¨æœŸï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å–æ¶ˆä»»åŠ¡æˆ–è®¾ç½®è¶…æ—¶çš„åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚ 1234567891011121314151617181920212223func worker(ctx context.Context, wg *sync.WaitGroup) &#123; defer wg.Done() for &#123; select &#123; case &lt;-ctx.Done(): fmt.Println(&quot;Worker canceled&quot;) return default: fmt.Println(&quot;Working...&quot;) time.Sleep(500 * time.Millisecond) &#125; &#125;&#125;func main() &#123; ctx, cancel := context.WithTimeout(context.Background(), 2*time.Second) defer cancel() var wg sync.WaitGroup wg.Add(1) go worker(ctx, &amp;wg) wg.Wait()&#125; 7. ä½¿ç”¨structæ ‡ç­¾å®ç°JSONåºåˆ—åŒ–GOè¯­è¨€æ”¯æŒé€šè¿‡structæ ‡ç­¾å°†ç»“æ„ä½“å­—æ®µæ˜ å°„ä¸ºJSONå­—æ®µï¼Œæ–¹ä¾¿æ•°æ®çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚ 12345678910type User struct &#123; Name string `json:&quot;name&quot;` Email string `json:&quot;email&quot;`&#125;func main() &#123; user := User&#123;Name: &quot;Alice&quot;, Email: &quot;alice@example.com&quot;&#125; jsonData, _ := json.Marshal(user) fmt.Println(string(jsonData)) // è¾“å‡º: &#123;&quot;name&quot;:&quot;Alice&quot;,&quot;email&quot;:&quot;alice@example.com&quot;&#125;&#125; 8. ä½¿ç”¨errorsåŒ…åˆ›å»ºè‡ªå®šä¹‰é”™è¯¯GOè¯­è¨€çš„errorsåŒ…å…è®¸åˆ›å»ºè‡ªå®šä¹‰é”™è¯¯ï¼Œä¾¿äºé”™è¯¯å¤„ç†å’Œè°ƒè¯•ã€‚ 1234567891011121314151617import &quot;errors&quot;func divide(a, b int) (int, error) &#123; if b == 0 &#123; return 0, errors.New(&quot;division by zero&quot;) &#125; return a / b, nil&#125;func main() &#123; result, err := divide(10, 0) if err != nil &#123; fmt.Println(&quot;Error:&quot;, err) &#125; else &#123; fmt.Println(&quot;Result:&quot;, result) &#125;&#125; 9. ä½¿ç”¨go modç®¡ç†ä¾èµ–go modæ˜¯GOè¯­è¨€çš„å®˜æ–¹ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå¯ä»¥è½»æ¾ç®¡ç†é¡¹ç›®çš„ä¾èµ–å…³ç³»ã€‚ 12345678# åˆå§‹åŒ–æ¨¡å—go mod init myproject# æ·»åŠ ä¾èµ–go get github.com/example/package# æ¸…ç†æœªä½¿ç”¨çš„ä¾èµ–go mod tidy 10. ä½¿ç”¨testingåŒ…ç¼–å†™å•å…ƒæµ‹è¯•GOè¯­è¨€å†…ç½®äº†testingåŒ…ï¼Œæ”¯æŒç¼–å†™å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿ä»£ç è´¨é‡ã€‚ 123456789101112import &quot;testing&quot;func Add(a, b int) int &#123; return a + b&#125;func TestAdd(t *testing.T) &#123; result := Add(2, 3) if result != 5 &#123; t.Errorf(&quot;Expected 5, got %d&quot;, result) &#125;&#125; è¿è¡Œæµ‹è¯•ï¼š 1go test ä»¥ä¸Šæ˜¯GOè¯­è¨€ä¸­æœ€æœ‰ä»·å€¼çš„åä¸ªæŠ€å·§ï¼Œæ¶µç›–äº†èµ„æºç®¡ç†ã€å¹¶å‘ç¼–ç¨‹ã€é”™è¯¯å¤„ç†ç­‰å¤šä¸ªæ–¹é¢ã€‚å¸Œæœ›è¿™äº›æŠ€å·§èƒ½å¸®åŠ©ä½ å†™å‡ºæ›´é«˜æ•ˆã€æ›´å¥å£®çš„GOä»£ç ï¼å¦‚æœä½ æœ‰å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚"},{"path":"/2025/02/08/tts/","content":"1. å®‰è£…ttshttps://github.com/idiap/coqui-ai-TTS"},{"path":"/2025/02/06/è‡ªæˆ‘ä»‹ç»/","content":"è‡ªæˆ‘ä»‹ç» âœ¨æˆ‘æ˜¯ è‘£æ´ªä¼Ÿï¼Œä¸€åæ¥è‡ª åŒ—äº¬ çš„ è½¯ä»¶å·¥ç¨‹å¸ˆã€‚æˆ‘çƒ­çˆ±ç¼–ç¨‹å’ŒæŠ€æœ¯åˆ†äº«ï¼Œä¸“æ³¨äº Web å¼€å‘ å’Œ äººå·¥æ™ºèƒ½ é¢†åŸŸã€‚ @keyframes glow { 0% { text-shadow: 0 0 5px #33FF57, 0 0 10px #33FF57; } 100% { text-shadow: 0 0 20px #33FF57, 0 0 30px #33FF57; } } ğŸš€ æˆ‘çš„ç»å† æ•™è‚²èƒŒæ™¯ï¼šæ¯•ä¸šäº å—äº¬ç†å·¥å¤§å­¦ï¼Œä¸»ä¿® æ™ºèƒ½ç§‘å­¦ä¸æŠ€æœ¯ã€‚ å·¥ä½œç»å†ï¼šç›®å‰åœ¨ ç™¾åº¦ æ‹…ä»»æ‹…ä»»èµ„æ·±å¼€å‘å·¥ç¨‹å¸ˆã€‚ æŠ€æœ¯æ ˆï¼šç†Ÿç»ƒæŒæ¡ Golangã€Pythonã€‚ ğŸŒŸ æˆ‘çš„å…´è¶£ å–œæ¬¢ç ”ç©¶ å‰æ²¿æŠ€æœ¯ï¼Œå°¤å…¶æ˜¯ AIGC å’Œ å·¥ç¨‹æ¶æ„ã€‚ ä¸šä½™æ—¶é—´ä¼šå†™ä¸€äº›æŠ€æœ¯åšå®¢ï¼Œåˆ†äº«æˆ‘çš„å­¦ä¹ å’Œå®è·µç»éªŒã€‚ çƒ­çˆ± é˜…è¯»å¹´å‡é˜…è¯»é‡ 50+ã€‚ ğŸ“¬ è”ç³»æˆ‘å¦‚æœä½ å¯¹æˆ‘çš„åšå®¢å†…å®¹æ„Ÿå…´è¶£ï¼Œæˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ï¼š é‚®ç®±ï¼šderekdongsir@163.com GitHub: https://github.com/DerekDongSir ä¸ªäººç½‘ç«™ï¼šhttps://blog.derekdong.com/ æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼ŒæœŸå¾…ä¸ä½ äº¤æµï¼ğŸ‰"},{"path":"/2025/01/26/è¯„è®ºç³»ç»Ÿ/","content":"https://zhuanlan.zhihu.com/p/691921194https://giscus.app/zh-CN"},{"title":"Sug","path":"/2025/01/26/sug/","content":"ç”Ÿäº§ç¯å¢ƒçš„sugåŠŸèƒ½å¦‚ä½•å®ç°"},{"title":"Hello World","path":"/2025/01/26/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment document.addEventListener('DOMContentLoaded', function() { const heatmapChartDom = document.getElementById('heatmapChart-0'); if (heatmapChartDom) { const isDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches; const backgroundColor = isDarkMode ? '#333' : 'transparent'; let heatmapChart = echarts.init(heatmapChartDom, isDarkMode ? 'dark' : 'light'); const cellSize = [16, 16]; const groupedData = {\"2025\":[[\"2025-01-26\",3]]}; const years = Object.keys(groupedData).reverse(); const initYear = '2025' || years[0]; // Define color themes const themes = { oceanic: ['#A6D8E8', '#6FB3D2', '#4A90BF', '#2E6A8E', '#1A4461'], forest: ['#ACE7AE', '#8FD694', '#69C16D', '#549F57', '#3A7D3E'], sunset: ['#FFD1A6', '#FFA07A', '#FF6F52', '#D94A3D', '#A62B2B'], earthy: ['#E3C8A8', '#C4A076', '#A57C52', '#7A5A3A', '#4E3A28'], pastel: ['#F5D5E6', '#E8B8D0', '#D18FB8', '#A86A8E', '#7A4A61'], golden: ['#FFEBB5', '#FFD966', '#FFB74D', '#D18F4A', '#A66B2B'], berry: ['#F4C2D7', '#E88BB3', '#D94A7A', '#A62B5C', '#7A1F3D'], charcoal: ['#E0E0E0', '#9E9E9E', '#616161', '#424242', '#212121'], }; // Function to get a random theme function getRandomTheme() { const themeKeys = Object.keys(themes); const randomKey = themeKeys[Math.floor(Math.random() * themeKeys.length)]; return themes[randomKey]; } // Use the specified theme or default to 'random' const colors = themes['random'.toLowerCase()] || getRandomTheme(); const chartOptions = { backgroundColor: backgroundColor, tooltip: { position: 'top', confine: true, formatter: params => `${params.value[0]}: ${params.value[1]} Article${params.value[1] !== 1 ? 's' : ''}`, }, calendar: { top: '13%', left: '2%', right: '8%', range: initYear, cellSize: cellSize, splitLine: { lineStyle: { color: '#E0E0E0', width: 1 } }, itemStyle: { borderWidth: 1, borderColor: '#E0E0E0', color: backgroundColor }, dayLabel: { show: false }, monthLabel: { show: true }, yearLabel: { show: false }, }, visualMap: { show: true, right: '8%', bottom: '5%', type: 'piecewise', orient: 'horizontal', text: ['More', 'Less'], min: 0, max: Math.max(...groupedData[initYear].map(item => item[1])), inRange: { color: colors }, }, legend: { type: 'scroll', icon: 'none', data: years, orient: 'vertical', top: '5%', right: 'right', itemWidth: 20, itemHeight: 20, itemGap: 10, pageIconSize: 10, pageTextStyle: { fontSize: 14 }, selectedMode: 'single', }, series: years.map(year => ({ type: 'heatmap', coordinateSystem: 'calendar', data: groupedData[year], name: year, emphasis: { disabled: true }, silent: year !== initYear, })), }; heatmapChart.setOption(chartOptions); heatmapChart.dispatchAction({ type: 'legendSelect', name: initYear, }); // Function to handle legend selection changes const handleLegendSelectChanged = function(params) { const selectedYear = Object.keys(params.selected).find(key => params.selected[key]); if (selectedYear && groupedData[selectedYear]) { heatmapChart.setOption({ calendar: { range: selectedYear }, visualMap: { max: Math.max(...groupedData[selectedYear].map(item => item[1])), }, series: years.map(year => ({ type: 'heatmap', coordinateSystem: 'calendar', data: groupedData[year], name: year, emphasis: { disabled: true }, silent: year !== selectedYear, })), }); } }; const handleClick = function(params) { if (params.componentType === 'series') { const [year, month] = params.value[0].split('-'); window.location.href = '/archives/' + year + '/' + month; } }; heatmapChart.on('legendselectchanged', handleLegendSelectChanged); heatmapChart.on('click', handleClick); // Listen for theme changes window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (event) => { heatmapChart.dispose(); heatmapChart = echarts.init(heatmapChartDom, event.matches ? 'dark' : 'light'); const newBackgroundColor = event.matches ? '#333' : 'transparent'; chartOptions.backgroundColor = newBackgroundColor; chartOptions.calendar.itemStyle.color = newBackgroundColor; heatmapChart.setOption(chartOptions); // Re-select the initial year heatmapChart.dispatchAction({ type: 'legendSelect', name: initYear, }); // Reattach the event listeners heatmapChart.on('legendselectchanged', handleLegendSelectChanged); heatmapChart.on('click', handleClick); }); } }); Powered by hexo-stats-echarts"},{"path":"/prompt.html","content":"ä½ æ˜¯ä¸€åGOæŠ€æœ¯ä¸“å®¶ï¼Œæ“…é•¿ä½¿ç”¨GOè¯­è¨€ï¼ŒåŒæ—¶ï¼Œä½ æ˜¯ä¸€åæŠ€æœ¯åšä¸»ï¼Œæ“…é•¿å°†æŠ€æœ¯çŸ¥è¯†ä»¥é€šä¿—æ˜“æ‡‚çš„æ–¹å¼è¿›è¡Œè®²è§£ã€‚ ç°åœ¨ï¼Œä½ æ­£åœ¨å†™ä¸€ç¯‡å…³äºGOè¯­è¨€çš„æ–‡ç« ï¼Œæ–‡ç« çš„æ ‡é¢˜æ˜¯ï¼šã€ŠGOè¯­è¨€æœ€æœ‰ä»·å€¼çš„åä¸ªæŠ€å·§ã€‹ã€‚ è¯·æ ¹æ®ä»¥ä¸‹è¦æ±‚ï¼Œæ’°å†™ä¸€ç¯‡å…³äºGOè¯­è¨€ç¼–ç¨‹çš„æ–‡ç« ï¼š æ–‡ç« éœ€è¦åŒ…å«10ä¸ªGOè¯­è¨€çš„æŠ€å·§ã€‚ æ–‡ç« éœ€è¦ä½¿ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€ï¼Œè®©è¯»è€…å®¹æ˜“ç†è§£ã€‚ æ–‡ç« éœ€è¦åŒ…å«ä»£ç ç¤ºä¾‹ï¼Œè®©è¯»è€…å¯ä»¥å®é™…æ“ä½œã€‚ æ–‡ç« ä»¥markdownæ ¼å¼ç¼–å†™ï¼Œå¹¶ä½¿ç”¨ä»£ç é«˜äº®ã€‚"}]